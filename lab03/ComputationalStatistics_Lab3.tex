\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\hypersetup{unicode=true,
            pdftitle={Computational Statistics - Lab 03},
            pdfauthor={Annalena Erhard (anner218) and Maximilian Pfundstein (maxpf364)},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\newcommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}

  \title{Computational Statistics - Lab 03}
    \pretitle{\vspace{\droptitle}\centering\huge}
  \posttitle{\par}
    \author{Annalena Erhard (anner218) and Maximilian Pfundstein (maxpf364)}
    \preauthor{\centering\large\emph}
  \postauthor{\par}
      \predate{\centering\large\emph}
  \postdate{\par}
    \date{24 Januar 2019}


\begin{document}
\maketitle

{
\setcounter{tocdepth}{3}
\tableofcontents
}
\section{Question 1: Cluster
Sampling}\label{question-1-cluster-sampling}

An opinion pool is assumed to be performed in several locations of
Sweden by sending interviewers to this location. Of course, it is
unreasonable from the ﬁnancial point of view to visit each city.
Instead, a decision was done to use random sampling without replacement
with the probabilities proportional to the number of inhabitants of the
city to select 20 cities. Explore the ﬁle \texttt{population.xls.} Note
that names in bold are counties, not cities.

\textbf{Task:}

Import necessary information to R.

\paragraph{Task 2}\label{task-2}

\textbf{Task:}

Use a uniform random number generator to create a function that selects
1 city from the whole list by the probability scheme oﬀered above (do
not use standard sampling functions present in R).

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sample_wo_replacement =}\StringTok{ }\ControlFlowTok{function}\NormalTok{(n, data, seed)\{}
\NormalTok{  samples =}\StringTok{ }\KeywordTok{numeric}\NormalTok{()}
\NormalTok{  i =}\StringTok{ }\DecValTok{1}
  \ControlFlowTok{while}\NormalTok{ (}\KeywordTok{length}\NormalTok{(samples) }\OperatorTok{<}\StringTok{ }\NormalTok{n) \{}
    \KeywordTok{set.seed}\NormalTok{(seed)}
\NormalTok{     a =}\StringTok{ }\KeywordTok{round}\NormalTok{(}\KeywordTok{runif}\NormalTok{(}\DataTypeTok{n =} \DecValTok{1}\NormalTok{, }\DataTypeTok{min =} \DecValTok{1}\NormalTok{, }\DataTypeTok{max =} \KeywordTok{nrow}\NormalTok{(data)))}
     \ControlFlowTok{while}\NormalTok{ (a }\OperatorTok{%in%}\StringTok{ }\NormalTok{samples) \{}
       \KeywordTok{set.seed}\NormalTok{(seed)}
\NormalTok{       a =}\StringTok{ }\KeywordTok{round}\NormalTok{(}\KeywordTok{runif}\NormalTok{(}\DataTypeTok{n =} \DecValTok{1}\NormalTok{, }\DataTypeTok{min =} \DecValTok{1}\NormalTok{, }\DataTypeTok{max =} \KeywordTok{nrow}\NormalTok{(data)))}
\NormalTok{     \}}
\NormalTok{     samples[i] =}\StringTok{ }\NormalTok{a}
\NormalTok{     i =}\StringTok{ }\NormalTok{i}\OperatorTok{+}\DecValTok{1}
\NormalTok{  \}}
  \KeywordTok{return}\NormalTok{(samples)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\paragraph{Task 3}\label{task-3}

\textbf{Task:} Use the function you have created in step 2 as follows:

\begin{enumerate}
\def\labelenumi{(\alph{enumi})}
\tightlist
\item
  Apply it to the list of all cities and select one city
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a =}\StringTok{ }\KeywordTok{sample_wo_replacement}\NormalTok{(}\DecValTok{1}\NormalTok{,data, }\DecValTok{12345}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{(\alph{enumi})}
\setcounter{enumi}{1}
\tightlist
\item
  Remove this city from the list
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{cities =}\StringTok{ }\NormalTok{data[}\OperatorTok{-}\NormalTok{a,]}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{(\alph{enumi})}
\setcounter{enumi}{2}
\tightlist
\item
  Apply this function again to the updated list of the cities
\item
  Remove this city from the list
\item
  \ldots{} and so on until you get exactly 20 cities.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{rownames}\NormalTok{(cities) =}\StringTok{ }\DecValTok{1}\OperatorTok{:}\KeywordTok{nrow}\NormalTok{(cities)}

\ControlFlowTok{while}\NormalTok{ (}\KeywordTok{nrow}\NormalTok{(cities) }\OperatorTok{>}\DecValTok{20}\NormalTok{) \{}
\NormalTok{  a =}\StringTok{ }\KeywordTok{sample_wo_replacement}\NormalTok{(}\DecValTok{1}\NormalTok{,cities, }\DecValTok{12345}\NormalTok{)}
\NormalTok{  cities =}\StringTok{ }\NormalTok{cities[}\OperatorTok{-}\NormalTok{a,]}
  \KeywordTok{rownames}\NormalTok{(cities) =}\StringTok{ }\DecValTok{1}\OperatorTok{:}\KeywordTok{nrow}\NormalTok{(cities)}
  \KeywordTok{print}\NormalTok{(}\KeywordTok{nrow}\NormalTok{(cities))}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 288
## [1] 287
## [1] 286
## [1] 285
## [1] 284
## [1] 283
## [1] 282
## [1] 281
## [1] 280
## [1] 279
## [1] 278
## [1] 277
## [1] 276
## [1] 275
## [1] 274
## [1] 273
## [1] 272
## [1] 271
## [1] 270
## [1] 269
## [1] 268
## [1] 267
## [1] 266
## [1] 265
## [1] 264
## [1] 263
## [1] 262
## [1] 261
## [1] 260
## [1] 259
## [1] 258
## [1] 257
## [1] 256
## [1] 255
## [1] 254
## [1] 253
## [1] 252
## [1] 251
## [1] 250
## [1] 249
## [1] 248
## [1] 247
## [1] 246
## [1] 245
## [1] 244
## [1] 243
## [1] 242
## [1] 241
## [1] 240
## [1] 239
## [1] 238
## [1] 237
## [1] 236
## [1] 235
## [1] 234
## [1] 233
## [1] 232
## [1] 231
## [1] 230
## [1] 229
## [1] 228
## [1] 227
## [1] 226
## [1] 225
## [1] 224
## [1] 223
## [1] 222
## [1] 221
## [1] 220
## [1] 219
## [1] 218
## [1] 217
## [1] 216
## [1] 215
## [1] 214
## [1] 213
## [1] 212
## [1] 211
## [1] 210
## [1] 209
## [1] 208
## [1] 207
## [1] 206
## [1] 205
## [1] 204
## [1] 203
## [1] 202
## [1] 201
## [1] 200
## [1] 199
## [1] 198
## [1] 197
## [1] 196
## [1] 195
## [1] 194
## [1] 193
## [1] 192
## [1] 191
## [1] 190
## [1] 189
## [1] 188
## [1] 187
## [1] 186
## [1] 185
## [1] 184
## [1] 183
## [1] 182
## [1] 181
## [1] 180
## [1] 179
## [1] 178
## [1] 177
## [1] 176
## [1] 175
## [1] 174
## [1] 173
## [1] 172
## [1] 171
## [1] 170
## [1] 169
## [1] 168
## [1] 167
## [1] 166
## [1] 165
## [1] 164
## [1] 163
## [1] 162
## [1] 161
## [1] 160
## [1] 159
## [1] 158
## [1] 157
## [1] 156
## [1] 155
## [1] 154
## [1] 153
## [1] 152
## [1] 151
## [1] 150
## [1] 149
## [1] 148
## [1] 147
## [1] 146
## [1] 145
## [1] 144
## [1] 143
## [1] 142
## [1] 141
## [1] 140
## [1] 139
## [1] 138
## [1] 137
## [1] 136
## [1] 135
## [1] 134
## [1] 133
## [1] 132
## [1] 131
## [1] 130
## [1] 129
## [1] 128
## [1] 127
## [1] 126
## [1] 125
## [1] 124
## [1] 123
## [1] 122
## [1] 121
## [1] 120
## [1] 119
## [1] 118
## [1] 117
## [1] 116
## [1] 115
## [1] 114
## [1] 113
## [1] 112
## [1] 111
## [1] 110
## [1] 109
## [1] 108
## [1] 107
## [1] 106
## [1] 105
## [1] 104
## [1] 103
## [1] 102
## [1] 101
## [1] 100
## [1] 99
## [1] 98
## [1] 97
## [1] 96
## [1] 95
## [1] 94
## [1] 93
## [1] 92
## [1] 91
## [1] 90
## [1] 89
## [1] 88
## [1] 87
## [1] 86
## [1] 85
## [1] 84
## [1] 83
## [1] 82
## [1] 81
## [1] 80
## [1] 79
## [1] 78
## [1] 77
## [1] 76
## [1] 75
## [1] 74
## [1] 73
## [1] 72
## [1] 71
## [1] 70
## [1] 69
## [1] 68
## [1] 67
## [1] 66
## [1] 65
## [1] 64
## [1] 63
## [1] 62
## [1] 61
## [1] 60
## [1] 59
## [1] 58
## [1] 57
## [1] 56
## [1] 55
## [1] 54
## [1] 53
## [1] 52
## [1] 51
## [1] 50
## [1] 49
## [1] 48
## [1] 47
## [1] 46
## [1] 45
## [1] 44
## [1] 43
## [1] 42
## [1] 41
## [1] 40
## [1] 39
## [1] 38
## [1] 37
## [1] 36
## [1] 35
## [1] 34
## [1] 33
## [1] 32
## [1] 31
## [1] 30
## [1] 29
## [1] 28
## [1] 27
## [1] 26
## [1] 25
## [1] 24
## [1] 23
## [1] 22
## [1] 21
## [1] 20
\end{verbatim}

\subparagraph{Task 4}\label{task-4}

\textbf{Task:} Run the program. Which cities were selected? What can you
say about the size of the selected cities?

\textbf{Answer:}

The following cities were selected:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{cities}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##        Municipality Population
## 1          Botkyrka      81195
## 2          Danderyd      31150
## 3          Eker\xf6      25095
## 4           Haninge      76237
## 5          Huddinge      95798
## 6    J\xe4rf\xe4lla      65295
## 7        Liding\xf6      43445
## 8             Nacka      88085
## 9      Norrt\xe4lje      55927
## 10          Nykvarn       9227
## 11     Nyn\xe4shamn      25781
## 12            Salem      15313
## 13          Sigtuna      39219
## 14       Sollentuna      63347
## 15         Lule\xe5      73950
## 16           Pajala       6309
## 17         Pite\xe5      40860
## 18       \xc4lvsbyn       8387
## 19     \xd6verkalix       3670
## 20 \xd6vertorne\xe5       4920
\end{verbatim}

It can be seen, that cities of all different sizes (counting the
population) were selected.

\subparagraph{Task 5}\label{task-5}

\textbf{Task :} Plot one histogram showing the size of all cities of the
country. Plot another histogram showing the size of the 20 selected
cities. Conclusions?

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{ggplot}\NormalTok{(cities)}\OperatorTok{+}
\StringTok{  }\KeywordTok{geom_histogram}\NormalTok{(}\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =}\NormalTok{ Population),}\DataTypeTok{bins =} \DecValTok{15}\NormalTok{)}\OperatorTok{+}
\StringTok{  }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"Histogram of selected cities"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{ComputationalStatistics_Lab3_files/figure-latex/task 1.5-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{ggplot}\NormalTok{(data)}\OperatorTok{+}
\StringTok{  }\KeywordTok{geom_histogram}\NormalTok{(}\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =}\NormalTok{ Population),}\DataTypeTok{bins =} \DecValTok{15}\NormalTok{)}\OperatorTok{+}
\StringTok{  }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"Histogram of all cities"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{ComputationalStatistics_Lab3_files/figure-latex/task 1.5-2.pdf}

\textbf{Answer: }

Comparing both histograms it can be seen that mostly smaller cities were
selected by the sampling function. The reason for that is on the one
side chance and on the other side the state of mostly smaller cities
existing in Sweden.

\subsubsection{Question 2}\label{question-2}

\subparagraph{Task 1}\label{task-1}

\textbf{Task: }

\subparagraph{Task 2}\label{task-2-1}

\textbf{Task:}

\textbf{Answer:}

\subparagraph{Task 3}\label{task-3-1}

\textbf{Task:}

\subparagraph{Task 4}\label{task-4-1}

\textbf{Task: }


\end{document}
